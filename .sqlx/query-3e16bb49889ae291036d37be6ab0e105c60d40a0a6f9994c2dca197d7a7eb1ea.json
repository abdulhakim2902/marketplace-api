{
  "db_name": "PostgreSQL",
  "query": "\n            WITH \n                mint_activities AS (\n                    SELECT\n                        a.receiver  AS address, \n                        COUNT(*)    AS count\n                    FROM activities a\n                    WHERE a.tx_type = 'mint' AND a.collection_id = $1\n                    GROUP BY a.receiver\n                ),\n                send_activities AS (\n                    SELECT\n                        a.sender    AS address, \n                        COUNT(*)    AS count\n                    FROM activities a\n                    WHERE a.tx_type IN ('buy', 'accept-bid', 'accept-collection-bid') AND a.collection_id = $1\n                    GROUP BY a.sender\n                ),\n                receive_activities AS (\n                    SELECT\n                        a.receiver  AS address, \n                        COUNT(*)    AS count\n                    FROM activities a\n                    WHERE a.tx_type IN ('buy', 'accept-bid', 'accept-collection-bid') AND a.collection_id = $1\n                    GROUP BY a.receiver\n                ),\n                nft_owners AS (\n                    SELECT \n                        n.owner     AS address,\n                        COUNT(*)    AS count\n                    FROM nfts n\n                    WHERE n.collection_id = $1 AND (n.burned IS NULL OR NOT n.burned)\n                    GROUP BY n.owner\n                )\n            SELECT \n                no.address, \n                no.count            AS quantity, \n                ma.count            AS mint,\n                sa.count            AS send,\n                ra.count            AS receive\n            FROM nft_owners no\n                LEFT JOIN mint_activities ma ON ma.address = no.address\n                LEFT JOIN send_activities sa ON sa.address = no.address\n                LEFT JOIN receive_activities ra ON ra.address = no.address\n            ORDER BY no.count\n            LIMIT $2 OFFSET $3\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "address",
        "type_info": "Varchar"
      },
      {
        "ordinal": 1,
        "name": "quantity",
        "type_info": "Int8"
      },
      {
        "ordinal": 2,
        "name": "mint",
        "type_info": "Int8"
      },
      {
        "ordinal": 3,
        "name": "send",
        "type_info": "Int8"
      },
      {
        "ordinal": 4,
        "name": "receive",
        "type_info": "Int8"
      }
    ],
    "parameters": {
      "Left": [
        "Text",
        "Int8",
        "Int8"
      ]
    },
    "nullable": [
      true,
      null,
      null,
      null,
      null
    ]
  },
  "hash": "3e16bb49889ae291036d37be6ab0e105c60d40a0a6f9994c2dca197d7a7eb1ea"
}
